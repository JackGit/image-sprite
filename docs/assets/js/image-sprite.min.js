!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.ImageSprite=i():t.ImageSprite=i()}(this,function(){return function(t){function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var e={};return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=6)}([function(t,i){t.exports={FORWARD:"forward",BACKWARD:"backward",ALTERNATE:"alternate"}},function(t,i,e){function n(t){this.imageSprite=t,this.direction=p}function o(){n.apply(this,arguments)}function s(t,i){n.apply(this,arguments),this.repeat=i,this.count=0,this.startFrameIndex=t.currentFrameIndex}function r(t,i){n.apply(this,arguments),this.count=0,this.total=i}function h(t,i){n.apply(this,arguments),this.targetFrameIndex=i}var a=e(2).inherit,p=e(0).FORWARD,d=e(0).BACKWARD,c=e(0).ALTERNATE;n.prototype.updateDirection=function(){var t=this.imageSprite;t.direction===c?0!==t.currentFrameIndex&&t.currentFrameIndex!==t.images.length-1||(this.direction=this.direction===p?d:p):this.direction=t.direction},n.prototype.update=function(){var t=this.imageSprite;this.direction===p?t.next():t.prev(),this.updateDirection()},o.prototype=a(n.prototype,{constructor:o,done:function(){return!1}}),s.prototype=a(n.prototype,{constructor:s,done:function(){return this.count===this.repeat},update:function(){n.prototype.update.apply(this),this.imageSprite.currentFrameIndex===this.startFrameIndex&&++this.count}}),r.prototype=a(n.prototype,{constructor:r,done:function(){return this.count===this.total},update:function(){n.prototype.update.apply(this),++this.count}}),h.prototype=a(n.prototype,{constructor:h,done:function(){return this.imageSprite.currentFrameIndex===this.targetFrameIndex}}),t.exports={LoopMode:o,RepeatMode:s,ToFrameMode:h,ByFrameMode:r}},function(t,i){function e(t,i){var e=new Image;e.onload=function(){i(e)},e.crossOrigin=!0,e.src=t}function n(t,i){var n=new Array(t.length);t.forEach(function(o,s){"string"==typeof o?e(o,function(e){n[s]=e,n.filter(function(t){return t}).length===t.length&&i&&i(n)}):n[s]=o})}function o(t,i){return i<1?-1:(t>=0?t%=i:t=(i+t%i)%i,t)}function s(t,i){return Object.assign(Object.create(t),i)}t.exports={loadImages:n,getValidIndex:o,inherit:s}},function(t,i){function e(t,i){this.width=t,this.height=i,this.domElement=null}e.prototype._init=function(){},e.prototype.drawImage=function(){},t.exports=e},function(t,i,e){function n(t,i){o.apply(this,arguments),this.context=null,this._init()}var o=e(3),s=e(2).inherit;n.prototype=s(o.prototype,{constructor:n,_init:function(){var t=document.createElement("canvas");t.width=t.style.width=this.width,t.height=t.style.height=this.height,this.context=t.getContext("2d"),this.domElement=t},drawImage:function(t){this.context.clearRect(0,0,this.width,this.height),this.context.drawImage(t,0,0,this.width,this.height)}}),t.exports=n},function(t,i,e){function n(t,i){o.apply(this,arguments),this.images=[],this._init()}var o=e(3),s=e(2).inherit;n.prototype=s(o.prototype,{constructor:n,_init:function(){var t=document.createElement("div");t.style.display="inline-block",t.style.position="absolute",t.style.margin=0,t.style.padding=0,this.domElement=t},_styleImage:function(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width=this.width+"px",t.style.height=this.height+"px"},drawImage:function(t){-1===this.images.indexOf(t)?(this.images.forEach(function(t){t.style.opacity=0}),this._styleImage(t),this.domElement.appendChild(t),this.images.push(t)):this.images.forEach(function(i){i.style.opacity=i===t?1:0})}}),t.exports=n},function(t,i,e){function n(t,i){var e={width:200,height:200,mode:"canvas",interval:16,images:[],onLoaded:null,onUpdate:null,onComplete:null};i=i||{},this.options={};for(var n in e)i[n]?this.options[n]=i[n]:this.options[n]=e[n];this.el="string"==typeof t?document.getElementById(t):t,this.renderer="canvas"===this.options.mode?new s(this.options.width,this.options.height):new o(this.options.width,this.options.height),this.images=[],this.isPlaying=!1,this.playMode=null,this.direction=u,this.interval=62.5,this.currentFrameIndex=-1,this.lastTick=0,this.seedId=0,this._init()}var o=e(5),s=e(4),r=e(2).loadImages,h=e(2).getValidIndex,a=e(1).LoopMode,p=e(1).RepeatMode,d=e(1).ByFrameMode,c=e(1).ToFrameMode,u=e(0).FORWARD;e(0).BACKWARD,e(0).ALTERNATE;n.prototype._init=function(){this.el.style.width=this.options.width+"px",this.el.style.height=this.options.height+"px",this.el.innerHTML="",this.el.appendChild(this.renderer.domElement),this._load()},n.prototype._load=function(){0===this.options.images.filter(function(t){return"string"==typeof t}).length?this._onLoad(this.options.images):r(this.options.images,function(t){this._onLoad(t)}.bind(this))},n.prototype._onLoad=function(t){this.images=t,this.next(),this._loop(),this.options.onLoaded&&this.options.onLoaded.bind(this)()},n.prototype._loop=function(){Date.now()-this.lastTick>this.interval&&(this.isPlaying&&!this.playMode.done()?(this.playMode.update(),this.options.onUpdate&&this.options.onUpdate.bind(this)()):this.isPlaying&&this.playMode.done()&&(this.isPlaying=!1,this.options.onComplete&&this.options.onComplete.bind(this)()),this.lastTick=Date.now()),this.seedId=requestAnimationFrame(this._loop.bind(this))},n.prototype._draw=function(){var t=this.images[this.currentFrameIndex];t&&this.renderer.drawImage(t)},n.prototype.play=function(t){t=t||{},!0===t.loop?this.playMode=new a(this):t.repeat>0?this.playMode=new p(this,t.repeat):t.byFrame>0?this.playMode=new d(this,t.byFrame):null!==t.toFrame&&void 0!==t.toFrame?this.playMode=new c(this,h(t.toFrame,this.images.length)):this.playMode=new a(this),this.direction=t.direction||u,this.interval=t.interval||this.options.interval,this.isPlaying=!0,this.lastTick=0},n.prototype.pause=function(){this.isPlaying=!1},n.prototype.next=function(){this.currentFrameIndex=h(this.currentFrameIndex+1,this.images.length),this._draw()},n.prototype.prev=function(){this.currentFrameIndex=h(this.currentFrameIndex-1,this.images.length),this._draw()},n.prototype.jump=function(t){this.currentFrameIndex=h(t,this.images.length),this._draw()},n.prototype.destroy=function(){cancelAnimationFrame(this.seedId),this.isPlaying=!1,this.images=null,this.playMode=null},t.exports=n}])});